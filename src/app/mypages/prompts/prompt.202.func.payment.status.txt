==============================================

참고할 PAGE 경로: src/app/mypages/page.tsx
구현될 HOOK 경로: src/app/mypages/hooks/index.payment.status.hook.ts

==============================================

핵심요구사항) 다음의 기능을 supabase를 연동하여 step-by-step 으로 구현하고, 적용 결과를 체크리스트로 반환할 것.
		1. 공통 전제
			- 테스트 목적이므로 사용자 식별값 없이 payment 테이블 전체를 대상으로 로직을 연습한다. 단, 실제 서비스 반영 시 식별 조건이 필수라는 주석을 남긴다.
			- Supabase SDK 기본 select 문으로는 그룹핑이 어렵기 때문에 아래 중 하나를 선택해 구현 방법을 명시한다.
				1) `payments_latest_by_transaction` 같은 View 를 미리 만들어 select 한다.
				2) `rpc('payments_latest_by_transaction')` 형태의 서버 함수를 호출한다.
			- 시간 비교는 UTC 타임존을 기준으로 하며, 클라이언트에서 `Date.now()` → ISO 문자열 → Supabase `timestamptz` 비교 순서를 유지한다. null 이거나 범위를 벗어난 값은 즉시 "Free" 처리한다.

		2. 조회시나리오
			2-1) payment 테이블(또는 Step 1 에서 만든 뷰/함수)의 목록 조회
				2-1-1) 그룹화 로직:
					1) `transaction_key` 로 그룹화
					2) 각 그룹에서 `created_at` 기준 최신 1건만 남기기 → Supabase 쿼리 주석으로 구현 방식을 설명한다.

				2-1-2) 최종 필터 조건:
					1) `status === "Paid"`
					2) `start_at <= nowUtc <= end_grace_at` (동일 타임존 비교, 경계값 포함)

			2-2) 조회 결과 후처리
				- 결과 행이 0건이면:
					- 상태메시지: `Free`
					- 버튼: "구독하기" 활성화
					- 체크리스트 항목: "무료 상태", "구독 CTA 노출"을 true 로 기록
				- 결과 행이 1건 이상이면 (최신 1건만 사용):
					- 상태메시지: `구독중`
					- 버튼: "구독취소" 활성화
					- 버튼 onClick 시 `transaction_key` 와 `payment_id` 만 전달하며, 추후 사용자 식별자가 추가되어야 함을 주석으로 남긴다.
					- 취소 호출 실패 시 노출할 에러 토스트 문구를 정의한다.

		3. 예외/로딩 처리
			- Supabase 호출 중에는 `isLoading` 상태를 true 로 유지하고, UI 차단 여부와 스켈레톤/스피너 정책을 설명한다.
			- 호출 실패 시 반환 형식: `{ statusMessage: "에러", actionLabel: null, checklist: [...] }` 처럼 에러 상태도 체크리스트에 포함한다.
			- 사용된 모든 시간/파라미터 값을 로그에 남길 때 PII 마스킹 규칙을 문서화한다.
